{% extends 'tulia/dashboard/dashboard.html' %}
{% load static %}

{% block content %}
    <div class="dashboard-wrapper">
            <div class="dashboard-ecommerce">
                <div class="container-fluid dashboard-content ">
                    <!-- ============================================================== -->
                    <!-- pageheader  -->
                    <!-- ============================================================== -->
                    <div class="row">
                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                            <div class="page-header">
                                <h2 class="pageheader-title">Visitors Dashboard Template </h2>
{#                                <p class="pageheader-text">Nulla euismod urna eros, sit amet scelerisque torton lectus vel mauris facilisis faucibus at enim quis massa lobortis rutrum.</p>#}
                                <div class="page-breadcrumb">
                                    <nav aria-label="breadcrumb">
                                        <ol class="breadcrumb">
                                            <li class="breadcrumb-item"><a href="#" class="breadcrumb-link">Dashboard</a></li>
                                            <li class="breadcrumb-item active" aria-current="page">Visitors Dashboard Template</li>
                                        </ol>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- ============================================================== -->
                    <!-- end pageheader  -->
                    <!-- ============================================================== -->
                    <div class="ecommerce-widget">

                        <div class="row">
                            <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12 col-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="text-muted">Total Visitors</h5>
                                        <div class="metric-value d-inline-block">
                                            <h1 class="mb-1">{{ visitors_count }}</h1>
                                        </div>
                                        <div class="metric-label d-inline-block float-right text-success font-weight-bold">
{#                                            <span><i class="fa fa-fw fa-arrow-up"></i></span><span>5.86%</span>#}
                                        </div>
                                    </div>
{#                                    <div id="sparkline-revenue"></div>#}
                                </div>
                            </div>
                            <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12 col-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="text-muted">Total Rooms</h5>
                                        <div class="metric-value d-inline-block">
                                            <h1 class="mb-1">{{ room_count }}</h1>
                                        </div>
                                        <div class="metric-label d-inline-block float-right text-success font-weight-bold">
{#                                            <span><i class="fa fa-fw fa-arrow-up"></i></span><span>5.86%</span>#}
                                        </div>
                                    </div>
{#                                    <div id="sparkline-revenue2"></div>#}
                                </div>
                            </div>
                            <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12 col-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="text-muted">Total Confrences</h5>
                                        <div class="metric-value d-inline-block">
                                            <h1 class="mb-1">{{ conference_count }}</h1>
                                        </div>
                                        <div class="metric-label d-inline-block float-right text-primary font-weight-bold">
{#                                            <span>N/A</span>#}
                                        </div>
                                    </div>
{#                                    <div id="sparkline-revenue3"></div>#}
                                </div>
                            </div>
                            <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12 col-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="text-muted">Taken Rooms</h5>
                                        <div class="metric-value d-inline-block">
                                            <h1 class="mb-1">{{taken_room_count }}</h1>
                                        </div>
                                        <div class="metric-label d-inline-block float-right text-secondary font-weight-bold">
{#                                            <span>-2.00%</span>#}
                                        </div>
                                    </div>
{#                                    <div id="sparkline-revenue4"></div>#}
                                </div>
                            </div>
                            <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12 col-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="text-muted">Taken Conferences</h5>
                                        <div class="metric-value d-inline-block">
                                            <h1 class="mb-1">{{ taken_conference_count }}</h1>
                                        </div>
                                        <div class="metric-label d-inline-block float-right text-secondary font-weight-bold">
{#                                            <span>-2.00%</span>#}
                                        </div>
                                    </div>
{#                                    <div id="sparkline-revenue4"></div>#}
                                </div>
                            </div>
                            <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12 col-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="text-muted">Vacant Conferences</h5>
                                        <div class="metric-value d-inline-block">
                                            <h1 class="mb-1">{{ av_conference_count }}</h1>
                                        </div>
                                        <div class="metric-label d-inline-block float-right text-secondary font-weight-bold">
{#                                            <span>-2.00%</span>#}
                                        </div>
                                    </div>
{#                                    <div id="sparkline-revenue4"></div>#}
                                </div>
                            </div>
                            <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12 col-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="text-muted">Vacant Rooms</h5>
                                        <div class="metric-value d-inline-block">
                                            <h1 class="mb-1">{{ av_room_count }}</h1>
                                        </div>
                                        <div class="metric-label d-inline-block float-right text-secondary font-weight-bold">
{#                                            <span>-2.00%</span>#}
                                        </div>
                                    </div>
{#                                    <div id="sparkline-revenue4"></div>#}
                                </div>
                            </div>
                            <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12 col-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="text-muted">Messages</h5>
                                        <div class="metric-value d-inline-block">
                                            <h1 class="mb-1">{{ messages_count }}</h1>
                                        </div>
                                        <div class="metric-label d-inline-block float-right text-secondary font-weight-bold">
{#                                            <span>-2.00%</span>#}
                                        </div>
                                    </div>
{#                                    <div id="sparkline-revenue4"></div>#}
                                </div>
                            </div>


                        </div>
                        <div class="row">
                            <!-- ============================================================== -->

                            <!-- ============================================================== -->



                            <!-- ============================================================== -->
                            <!-- ============================================================== -->
                            <!-- customer acquistion  -->
                            <!-- ============================================================== -->
                            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12">
                                <div class="card">
                                    <h5 class="card-header">Visitors Join By Date</h5>
                                    <div class="card-body">
                                        <canvas class="main-chart" id="orderschart" height="200" width="600"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12">
                                <div class="card">
                                    <h5 class="card-header">Rooms Created</h5>
                                    <div class="card-body">
                                        <canvas class="main-chart" id="roomschart" height="200" width="600"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12">
                                <div class="card">
                                    <h5 class="card-header">Conference Created</h5>
                                    <div class="card-body">
                                        <canvas class="main-chart" id="conferenceschart" height="200" width="600"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12">
                                <div class="card">
                                    <h5 class="card-header">Messages Created</h5>
                                    <div class="card-body">
                                        <canvas class="main-chart" id="messageschart" height="200" width="600"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                                <div class="card">
                                    <h5 class="card-header">Bookings</h5>
                                    <div class="card-body">
                                        <canvas class="main-chart" id="bookingschart" height="200" width="600"></canvas>
                                    </div>
                                </div>
                            </div>


                            <!-- ============================================================== -->
                            <!-- end customer acquistion  -->
                            <!-- ============================================================== -->
                        </div>

                    </div>
                </div>
            </div>
            <!-- ============================================================== -->
            <!-- footer -->
            <!-- ============================================================== -->
            <div class="footer">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12">
                             Copyright Â© 2018 Concept. All rights reserved
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12">
                            <div class="text-md-right footer-links d-none d-sm-block">
                                <a href="javascript: void(0);">About</a>
                                <a href="javascript: void(0);">Support</a>
                                <a href="javascript: void(0);">Contact Us</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ============================================================== -->
            <!-- end footer -->
            <!-- ============================================================== -->
        </div>
{% endblock content %}
 {% block scripts  %}
      <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
     <script>
        var endpoint2 = '{% url 'VisitorsAdmin:ListVisitors' %}';
        var defaultData2 =  [];
        var labels2 = [];
        $.ajax({
            method: "GET",
            url : endpoint2,
            success : function (data) {
                labels2 = data.labels2;
                defaultData23= data.defaultData23;
                setOrderChart();
                setOrderChartlineseller();

                // console.log(data);
            },
            error : function (error_data) {
                console.log(error);
                console.log(error_data);
            },
        });

        function setOrderChart() {
            var ctx = document.getElementById('orderschart').getContext('2d');
            var myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels2,
                datasets: [{
                    label: 'Visitors',

                    data: defaultData23,
                    backgroundColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgb(129,255,46)',
                        'rgb(255,217,66)',
                        'rgb(255,131,255)',
                        'rgb(1,53,255)',
                        'rgba(255, 159, 64, 1)',
                        'rgb(36,255,221)',
                        'rgb(145,255,39)',
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgb(129,255,46)',
                        'rgb(255,217,66)',
                        'rgb(255,131,255)',
                        'rgb(1,53,255)',
                        'rgba(255, 159, 64, 1)',
                        'rgb(36,255,221)',
                        'rgb(145,255,39)',

                    ],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {


                            stepSize: 1,
                            beginAtZero: true
                        }
                    }]
                }
            }
        });
        }
        </script>
     <script>
        var endpoint2 = '{% url 'VisitorsAdmin:ListRooms' %}';
        var defaultData2 =  [];
        var labels2 = [];
        $.ajax({
            method: "GET",
            url : endpoint2,
            success : function (data) {
                labels2 = data.labels2;
                defaultData23= data.defaultData23;
                setRoomsChart();
                setOrderChartlineseller();

                // console.log(data);
            },
            error : function (error_data) {
                console.log(error);
                console.log(error_data);
            },
        });

        function setRoomsChart() {
            var ctx = document.getElementById('roomschart').getContext('2d');
            var myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels2,
                datasets: [{
                    label: 'Room',

                    data: defaultData23,
                    backgroundColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgb(129,255,46)',
                        'rgb(255,217,66)',
                        'rgb(255,131,255)',
                        'rgb(1,53,255)',
                        'rgba(255, 159, 64, 1)',
                        'rgb(36,255,221)',
                        'rgb(145,255,39)',
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgb(129,255,46)',
                        'rgb(255,217,66)',
                        'rgb(255,131,255)',
                        'rgb(1,53,255)',
                        'rgba(255, 159, 64, 1)',
                        'rgb(36,255,221)',
                        'rgb(145,255,39)',

                    ],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {


                            stepSize: 1,
                            beginAtZero: true
                        }
                    }]
                }
            }
        });
        }
        </script>
     <script>
        var endpoint2 = '{% url 'VisitorsAdmin:Listconferences' %}';
        var defaultData2 =  [];
        var labels2 = [];
        $.ajax({
            method: "GET",
            url : endpoint2,
            success : function (data) {
                labels2 = data.labels2;
                defaultData23= data.defaultData23;
                setConferenceChart();
                setOrderChartlineseller();

                // console.log(data);
            },
            error : function (error_data) {
                console.log(error);
                console.log(error_data);
            },
        });

        function setConferenceChart() {
            var ctx = document.getElementById('conferenceschart').getContext('2d');
            var myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels2,
                datasets: [{
                    label: 'Conferences',

                    data: defaultData23,
                    backgroundColor: [
                        'rgb(129,255,46)',
                        'rgb(255,217,66)',
                        'rgb(255,131,255)',
                        'rgb(1,53,255)',
                        'rgba(255, 159, 64, 1)',
                        'rgb(36,255,221)',
                        'rgb(145,255,39)',
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',

                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgb(129,255,46)',
                        'rgb(255,217,66)',
                        'rgb(255,131,255)',
                        'rgb(1,53,255)',
                        'rgba(255, 159, 64, 1)',
                        'rgb(36,255,221)',
                        'rgb(145,255,39)',

                    ],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {


                            stepSize: 1,
                            beginAtZero: true
                        }
                    }]
                }
            }
        });
        }
        </script>
     <script>
        var endpoint2 = '{% url 'VisitorsAdmin:Listmessagess' %}';
        var defaultData2 =  [];
        var labels2 = [];
        $.ajax({
            method: "GET",
            url : endpoint2,
            success : function (data) {
                labels2 = data.labels2;
                defaultData23= data.defaultData23;
                setmessageschartChart();
                setOrderChartlineseller();

                // console.log(data);
            },
            error : function (error_data) {
                console.log(error);
                console.log(error_data);
            },
        });

        function setmessageschartChart() {
            var ctx = document.getElementById('messageschart').getContext('2d');
            var myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels2,
                datasets: [{
                    label: 'Messages',

                    data: defaultData23,
                    backgroundColor: [
                        'rgba(255, 159, 64, 1)',

                        'rgb(255,217,66)',
                        'rgb(255,131,255)',
                        'rgb(1,53,255)',
                        'rgb(129,255,46)',
                        'rgb(36,255,221)',
                        'rgb(145,255,39)',
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',

                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgb(129,255,46)',
                        'rgb(255,217,66)',
                        'rgb(255,131,255)',
                        'rgb(1,53,255)',
                        'rgba(255, 159, 64, 1)',
                        'rgb(36,255,221)',
                        'rgb(145,255,39)',

                    ],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {


                            stepSize: 1,
                            beginAtZero: true
                        }
                    }]
                }
            }
        });
        }
        </script>
     <script>
        var endpoint2 = '{% url 'VisitorsAdmin:Listbookings' %}';
        var defaultData2 =  [];
        var labels2 = [];
        $.ajax({
            method: "GET",
            url : endpoint2,
            success : function (data) {
                labels2 = data.labels2;
                defaultData23= data.defaultData23;
                defaultData33= data.defaultData33;
                setbookingschartChart();
                setOrderChartlineseller();

                // console.log(data);
            },
            error : function (error_data) {
                console.log(error);
                console.log(error_data);
            },
        });

        function setbookingschartChart() {
            var ctx = document.getElementById('bookingschart').getContext('2d');
            var myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels2,
                datasets: [
                    {
                    label: 'Rooms',
                    data: defaultData23,
                    backgroundColor: [
                        'rgba(255, 159, 64, 1)',

                        'rgb(255,217,66)',
                        'rgb(255,131,255)',
                        'rgb(1,53,255)',
                        'rgb(129,255,46)',
                        'rgb(36,255,221)',
                        'rgb(145,255,39)',
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',

                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgb(129,255,46)',
                        'rgb(255,217,66)',
                        'rgb(255,131,255)',
                        'rgb(1,53,255)',
                        'rgba(255, 159, 64, 1)',
                        'rgb(36,255,221)',
                        'rgb(145,255,39)',

                    ],
                    borderWidth: 1
                },
                {
                    label: 'Conferences',
                    data: defaultData33,
                    backgroundColor: [
                        'rgba(255, 159, 64, 1)',

                        'rgb(255,217,66)',
                        'rgb(255,131,255)',
                        'rgb(1,53,255)',
                        'rgb(129,255,46)',
                        'rgb(36,255,221)',
                        'rgb(145,255,39)',
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',

                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgb(129,255,46)',
                        'rgb(255,217,66)',
                        'rgb(255,131,255)',
                        'rgb(1,53,255)',
                        'rgba(255, 159, 64, 1)',
                        'rgb(36,255,221)',
                        'rgb(145,255,39)',

                    ],
                    borderWidth: 1
                },

                ]

            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {


                            stepSize: 1,
                            beginAtZero: true
                        }
                    }]
                }
            }
        });
        }
        </script>

 {% endblock scripts  %}